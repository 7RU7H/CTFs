$(document).ready(function(){var c=RAINIER.ui.buildInputValidBalloon;var e="my-account-password";var b={currentPassword:c({els:$("#currentPassword"),minLen:6,maxLen:128,whiteSpace:false,isRequired:false,validCharSet:"ascii",validationType:"currentPasswordMatch",group:e}),password:c({els:$("#password"),minLen:8,maxLen:128,whiteSpace:false,isRequired:true,validCharSet:"ascii",validationType:"password",group:e}),passwordConfirm:c({els:$("#passwordConfirm"),minLen:8,maxLen:128,whiteSpace:false,isRequired:true,validCharSet:"ascii",validationType:"confirmPassword",elCompareTo:$("#password"),group:e})};function a(f){RAINIER.ui.wait(false);try{if(JSON.parse(f.responseText).errors[0].error.code==="INVALID_CURRENT_PASSWORD"){RAINIER.ui.inputBalloon.message({message:RAINIER.ui.myAccountStrings.errorChangingPassword,els:$("#currentPassword"),autoHide:true});return true}}catch(g){}RAINIER.ui.alert(RAINIER.ui.myAccountStrings.couldNotSaveAccountModifications,RAINIER.ui.myAccountStrings.couldNotSaveAccountModificationsTitle);return true}function d(){var f=b.currentPassword.isValid(true);if(f){f=b.password.isValid();if(!f){b.password.isValid(true)}}if(f){f=b.passwordConfirm.isValid(true)}if(!f){return}RAINIER.ui.wait(true);RAINIER.cloud.send({url:"/cloud/user-service/rest/accounts/self/passwordchanges",type:"POST",data:{passwordChange:{newPassword:$("#password").val(),currentPassword:$("#currentPassword").val()}},cb:function(h,g){if(g.status!==200){a(g)}else{RAINIER.network.goToIndex()}},cbError:a})}$("#cancelButton").click(RAINIER.network.goToIndex);$("#okButton").click(d);RAINIER.ui.placeholders.init()});