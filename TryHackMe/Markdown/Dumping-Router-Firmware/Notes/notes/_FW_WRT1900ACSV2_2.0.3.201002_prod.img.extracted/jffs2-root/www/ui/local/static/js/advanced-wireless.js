(function(){var d=$("#advancedwireless"),g="RADIO_2.4GHz",j="RADIO_5GHz",l={twofour:{},fivezero:{},info:{},broadcom:{advancedsettings:{},txBFSettings:{}},marvell:{txBFSettings:{},radio24:{},radio50:{},advancedRadioSettings:[]},qualcomm:{qualcommAdvancedRadioSettings:{},qca_radio24:{},qca_radio50:{},qca_radio50_2:{}},mediatek:{advancedsettings:{}}},s,v,u,r,i,n,k,q,t;var h={"settings.apIsolation":"boolean","settings.frameburst":"boolean","settings.ctsProtection":"boolean","settings.greenfieldPreamble":"boolean","settings.htDuplicate":"boolean","settings.spaceTimeBlockCode":"boolean","settings.wirelessMultimediaPowerSave":"boolean","settings.beaconIntervalMilliseconds":"number","settings.dtimIntervalMilliseconds":"number","settings.fragmentationThresholdBytes":"number","settings.rtsThresholdBytes":"number","settings.rateMbps":"number","settings.pmfEnabled":"boolean","advancedsettings.multicastForwarding":"boolean","txBFSettings.txbfEnabled":"boolean","advancedSettings.isTxBFEnabled":"boolean","advancedSettings.isMUMIMOEnabled":"boolean","advancedsettings.isIGMPSnoopingEnabled":"boolean","advancedsettings.isOBSSCoexsistenceEnabled":"boolean","advancedsettings.isEDCCAEnabled":"boolean"};var b={onTabChange:function(){c(this.id)},onRevert:function(){p()},onApply:function(){o()}};function o(){var x={broadcom:{advancedsettings:{},txBFSettings:{}},marvell:{},qualcomm:{},wireless:{radios:[]}},z;if(!$.isEmptyObject(l.twofour)){z=RAINIER.binder.fromDom($("#24ghz"),h);z.radioID=g;x.wireless.radios.push(z)}if(!$.isEmptyObject(l.fivezero)){z=RAINIER.binder.fromDom($("#50ghz"),h);z.radioID=j;x.wireless.radios.push(z)}x.broadcom=RAINIER.binder.fromDom($("#broadcom"),h);x.marvell=RAINIER.binder.fromDom($("#marvell"),h);x.qualcomm=RAINIER.binder.fromDom($("#qualcomm"),h);x.mediatek=RAINIER.binder.fromDom($("#mediatek"),h);var I=RAINIER.jnap.Transaction({onComplete:RAINIER.ui.hideWaiting,disableDefaultRebootErrHandler:true});var A=false;for(var F=0;F<x.wireless.radios.length;F++){if(x.wireless.radios[F].radioID===g){if(!$.compare(l.twofour.settings,x.wireless.radios[F].settings)){A=true;break}}else{if(x.wireless.radios[F].radioID===j){if(!$.compare(l.fivezero.settings,x.wireless.radios[F].settings)){A=true;break}}}}if(A){I.add({action:"/jnap/wirelessap/SetAdvancedRadioSettings",data:x.wireless,cb:function(J){if(J.result==="OK"){$.each(x.wireless.radios,function(){if(this.radioID===g){$.extend(true,l.twofour.settings,this.settings)}else{if(this.radioID===j){$.extend(true,l.fivezero.settings,this.settings)}}})}else{RAINIER.ui.alert("SetAdvancedRadioSettings failed with the following reason:"+J.result)}}})}if(s&&!u&&!r&&!$.compare(l.broadcom.advancedsettings,x.broadcom.advancedsettings)){I.add({action:"/jnap/wirelessap/broadcom/SetAdvancedSettings",data:x.broadcom.advancedsettings,cb:function(J){if(J.result==="OK"){$.extend(true,l.broadcom.advancedsettings,x.broadcom.advancedsettings)}else{RAINIER.ui.alert("/broadcom/SetAdvancedSettings failed with the following reason:"+J.result)}}})}if(v&&!$.compare(l.broadcom.txBFSettings,x.broadcom.txBFSettings)){I.add({action:"/jnap/wirelessap/broadcom/SetTxBFSettings",data:x.broadcom.txBFSettings,cb:function(J){if(J.result==="OK"){$.extend(true,l.broadcom.txBFSettings,x.broadcom.txBFSettings)}else{RAINIER.ui.alert("/broadcom/SetTxBFSettings failed with the following reason:"+J.result)}}})}if(u&&!r&&!$.compare(l.broadcom.advancedsettings,x.broadcom.advancedsettings)){I.add({action:"/jnap/wirelessap/broadcom/SetAdvancedSettings2",data:x.broadcom.advancedsettings,cb:function(J){if(J.result==="OK"){$.extend(true,l.broadcom.advancedsettings,x.broadcom.advancedsettings)}else{RAINIER.ui.alert("/broadcom/SetAdvancedSettings2 failed with the following reason:"+J.result)}}})}if(r&&!$.compare(l.broadcom.advancedsettings,x.broadcom.advancedsettings)){if(l.broadcom.advancedsettings.advancedRadioSettings){var H=x.broadcom.brcm_radio50,B=x.broadcom.brcm_radio50_2;H.radioID="RADIO_5GHz";B.radioID="RADIO_5GHz_2";x.broadcom.advancedsettings.advancedRadioSettings=[];x.broadcom.advancedsettings.advancedRadioSettings.push(H);x.broadcom.advancedsettings.advancedRadioSettings.push(B)}console.warn(l.broadcom.advancedsettings,x.broadcom.advancedRadioSettings);I.add({action:"/jnap/wirelessap/broadcom/SetAdvancedSettings3",data:x.broadcom.advancedsettings,cb:function(J){if(J.result==="OK"){$.extend(true,l.broadcom.advancedsettings,x.broadcom.advancedsettings)}else{RAINIER.ui.alert("/broadcom/SetAdvancedSettings3 failed with the following reason:"+J.result)}}})}if(i&&!n&&!$.compare(l.marvell.txBFSettings,x.marvell.txBFSettings)){I.add({action:"/jnap/wirelessap/marvell/SetTxBFSettings",data:x.marvell.txBFSettings,cb:function(J){if(J.result==="OK"){$.extend(true,l.marvell.txBFSettings,x.marvell.txBFSettings)}else{RAINIER.ui.alert("/marvell/SetTxBFSettings failed with the following reason:"+J.result)}}})}if(n){var E;x.marvell.radio24.radioID="RADIO_2.4GHz";x.marvell.radio50.radioID="RADIO_5GHz";delete x.marvell.txBFSettings;E=[x.marvell.radio24,x.marvell.radio50];if(!$.compare(l.marvell.advancedRadioSettings,E)){I.add({action:"/jnap/wirelessap/marvell/SetAdvancedSettings",data:{advancedRadioSettings:E},cb:function(J){if(J.result==="OK"){$.extend(true,l.marvell.advancedRadioSettings,E);$.each(l.marvell.advancedRadioSettings,function(){if(this.radioID==="RADIO_2.4GHz"){l.marvell.radio24=this}else{if(this.radioID==="RADIO_5GHz"){l.marvell.radio50=this}}})}else{RAINIER.ui.alert("/marvell/SetAdvancedSettings failed with the following reason:"+J.result)}}})}}if(k){var w=x.qualcomm.qca_radio24,y=x.qualcomm.qca_radio50,G=x.qualcomm.qca_radio50_2;w.radioID="RADIO_2.4GHz";y.radioID="RADIO_5GHz";G.radioID="RADIO_5GHz_2";x.qualcomm.advancedRadioSettings=[];w.isMUMIMOEnabled=l.qualcomm.qca_radio24.isMUMIMOEnabled;x.qualcomm.advancedRadioSettings.push(w);x.qualcomm.advancedRadioSettings.push(y);if(!$.isEmptyObject(l.qualcomm.qca_radio50_2)){x.qualcomm.advancedRadioSettings.push(G)}console.warn(l.qualcomm.qualcommAdvancedRadioSettings,x.qualcomm.advancedRadioSettings);if(!$.compare(l.qualcomm.qualcommAdvancedRadioSettings,x.qualcomm.advancedRadioSettings)){I.add({action:"/jnap/wirelessap/qualcomm/SetAdvancedRadioSettings",data:{qualcommAdvancedRadioSettings:x.qualcomm.advancedRadioSettings},cb:function(J){if(J.result==="OK"){$.extend(true,l.qualcomm.qualcommAdvancedRadioSettings,x.qualcomm.advancedRadioSettings)}else{RAINIER.ui.alert("/qualcomm/SetAdvancedRadioSettings failed with the following reason:"+J.result)}}})}}if(q&&!t&&!$.compare(l.mediatek.advancedsettings,x.mediatek.advancedsettings)){I.add({action:"/jnap/wirelessap/mediatek/SetAdvancedSettings",data:x.mediatek.advancedsettings,cb:function(J){if(J.result==="OK"){$.extend(true,l.mediatek.advancedsettings,x.mediatek.advancedsettings)}else{RAINIER.ui.alert("SetAdvancedSettings failed with the following reason:"+J.result)}}})}if(t&&!$.compare(l.mediatek.advancedsettings,x.mediatek.advancedsettings)){if(l.mediatek.advancedsettings.advancedRadioSettings){var C=x.mediatek.mtk_radio24,D=x.mediatek.mtk_radio50;C.radioID="RADIO_2.4GHz";D.radioID="RADIO_5GHz";x.mediatek.advancedsettings.advancedRadioSettings=[];x.mediatek.advancedsettings.advancedRadioSettings.push(C);x.mediatek.advancedsettings.advancedRadioSettings.push(D)}console.warn(l.mediatek.advancedsettings,x.mediatek.advancedRadioSettings);I.add({action:"/jnap/wirelessap/mediatek/SetAdvancedSettings2",data:x.mediatek.advancedsettings,cb:function(J){if(J.result==="OK"){$.extend(true,l.mediatek.advancedsettings,x.mediatek.advancedsettings)}else{RAINIER.ui.alert("/mediatek/SetAdvancedSettings2 failed with the following reason:"+J.result)}}})}if(I.actions.length>0){RAINIER.ui.showWaiting();I.send()}else{}}function f(y,w){for(var x=0;x<w.length;x++){d.find(y).append($("<option></option>").val(w[x]).html(w[x]))}}function a(){if(!$.isEmptyObject(l.twofour)){f("#24ghz-supportedRatesMbps",l.twofour.supportedRatesMbps);f("#24ghz-supportedNRatesMbps",l.twofour.supportedNRatesMbps)}if(!$.isEmptyObject(l.fivezero)){f("#50ghz-supportedRatesMbps",l.fivezero.supportedRatesMbps);f("#50ghz-supportedNRatesMbps",l.fivezero.supportedNRatesMbps)}}function p(){RAINIER.binder.toDom(l.twofour,$("#24ghz"),h);RAINIER.binder.toDom(l.fivezero,$("#50ghz"),h);RAINIER.binder.toDom(l.broadcom,$("#broadcom"),h);RAINIER.binder.toDom(l.marvell,$("#marvell"),h);RAINIER.binder.toDom(l.qualcomm,$("#qualcomm"),h);RAINIER.binder.toDom(l.mediatek,$("#mediatek"),h)}function c(w){$("#24ghz-tab, #50ghz-tab, #broadcom-tab, #marvell-tab, #qualcomm-tab, #mediatek-tab").removeClass("selected");$("#24ghz, #50ghz, #broadcom, #marvell, #qualcomm, #mediatek").css("display","none");if(w==="24ghz-tab"){$("#advancedwireless #24ghz-tab").addClass("selected");$("#24ghz").css("display","block")}else{if(w==="50ghz-tab"){$("#advancedwireless #50ghz-tab").addClass("selected");$("#50ghz").css("display","block")}else{if(w==="broadcom-tab"){$("#advancedwireless #broadcom-tab").addClass("selected");$("#broadcom").css("display","block")}else{if(w==="marvell-tab"){$("#advancedwireless #marvell-tab").addClass("selected");$("#marvell").css("display","block")}else{if(w==="qualcomm-tab"){$("#advancedwireless #qualcomm-tab").addClass("selected");$("#qualcomm").css("display","block")}else{if(w==="mediatek-tab"){$("#advancedwireless #mediatek-tab").addClass("selected");$("#mediatek").css("display","block")}}}}}}RAINIER.ui.fixIeForm(d)}function e(A){var w=true;for(var z=0;z<A.length&&w;z++){var y=false;for(var x=0;x<l.info.services.length;x++){if(A[z]===l.info.services[x]){y=true;break}}w=w&&y}return w}function m(){s=e(["http://linksys.com/jnap/wirelessap/broadcom/AdvancedBroadcom"]);v=e(["http://linksys.com/jnap/wirelessap/broadcom/AdvancedBroadcom2"]);u=e(["http://linksys.com/jnap/wirelessap/broadcom/AdvancedBroadcom3"]);r=e(["http://linksys.com/jnap/wirelessap/broadcom/AdvancedBroadcom4"]);i=e(["http://linksys.com/jnap/wirelessap/marvell/AdvancedMarvell"]);n=e(["http://linksys.com/jnap/wirelessap/marvell/AdvancedMarvell2"]);k=e(["http://linksys.com/jnap/wirelessap/qualcomm/AdvancedQualcomm"]);q=e(["http://linksys.com/jnap/wirelessap/mediatek/AdvancedMediatek"]);t=e(["http://linksys.com/jnap/wirelessap/mediatek/AdvancedMediatek2"]);if(s||v){$("#advancedwireless > section > ul").append('<li id="broadcom-tab" class="broadcom"><span>Broadcom</span></li>')}else{$("#advancedwireless .AdvancedBroadcom").remove()}if(!v){$("#advancedwireless .AdvancedBroadcom2").remove()}if(!u){$("#advancedwireless .AdvancedBroadcom3").remove()}if(!r){$("#advancedwireless .AdvancedBroadcom4").remove()}if(i||n){$("#advancedwireless > section > ul").append('<li id="marvell-tab" class="marvell"><span>Marvell</span></li>')}else{$("#advancedwireless .AdvancedMarvell").remove()}if(n){$("#advancedwireless .AdvancedMarvell1").remove()}else{$("#advancedwireless .AdvancedMarvell2").remove()}if(k){$("#advancedwireless > section > ul").append('<li id="qualcomm-tab" class="qualcomm"><span>Qualcomm</span></li>')}else{$("#advancedwireless .AdvancedQualcomm").remove()}if(q){$("#advancedwireless > section > ul").append('<li id="mediatek-tab" class="mediatek"><span>Mediatek</span></li>')}else{$("#advancedwireless .AdvancedMediatek").remove()}if(!t){$("#advancedwireless .AdvancedMediatek2").remove()}d.find(".tab-section ul li").click(b.onTabChange);d.find("footer .revert").click(b.onRevert);d.find("footer .apply").click(b.onApply);var w=RAINIER.jnap.Transaction({onComplete:function(){if($.isEmptyObject(l.twofour)){d.find("#24ghz-tab").hide()}if($.isEmptyObject(l.fivezero)){d.find("#50ghz-tab").hide()}if(!$.isEmptyObject(l.twofour)){c("24ghz-tab")}else{if(!$.isEmptyObject(l.fivezero)){c("50ghz-tab")}else{if(s){c("broadcom-tab")}else{if(i){c("marvell-tab")}else{if(k){c("qualcomm-tab")}else{if(q){c("mediatek-tab")}}}}}}a();p();RAINIER.ui.hideWaiting()}});w.add({action:"/jnap/wirelessap/GetAdvancedRadioInfo",data:{},cb:function(y){for(var x=0;x<y.output.radios.length;x++){if(y.output.radios[x].radioID===g){l.twofour=y.output.radios[x]}else{if(y.output.radios[x].radioID===j){l.fivezero=y.output.radios[x]}}}}});if(s&&!u&&!r){w.add({action:"/jnap/wirelessap/broadcom/GetAdvancedSettings",data:{},cb:function(x){l.broadcom.advancedsettings=x.output}})}if(v){w.add({action:"/jnap/wirelessap/broadcom/GetTxBFSettings",data:{},cb:function(x){l.broadcom.txBFSettings=x.output}})}if(u&&!r){w.add({action:"/jnap/wirelessap/broadcom/GetAdvancedSettings2",data:{},cb:function(x){l.broadcom.advancedsettings=x.output}})}if(r){w.add({action:"/jnap/wirelessap/broadcom/GetAdvancedSettings3",data:{},cb:function(x){l.broadcom.advancedsettings=$.extend(true,{},x.output);if(!l.broadcom.advancedsettings.isMUMIMOSupported){$("#advancedwireless .AdvancedBroadcom4 input").prop("disabled","disabled")}if(l.broadcom.advancedsettings.advancedRadioSettings){$.each(l.broadcom.advancedsettings.advancedRadioSettings,function(){if(this.radioID==="RADIO_5GHz"){l.broadcom.brcm_radio50=this}else{if(this.radioID==="RADIO_5GHz_2"){l.broadcom.brcm_radio50_2=this}}})}}})}if(i&&!n){w.add({action:"/jnap/wirelessap/marvell/GetTxBFSettings",data:{},cb:function(x){l.marvell.txBFSettings=x.output}})}if(n){w.add({action:"/jnap/wirelessap/marvell/GetAdvancedSettings",data:{},cb:function(x){l.marvell=$.extend(true,{},x.output);$("#advancedwireless .AdvancedMarvell2.mu-mimo input").prop("disabled",!l.marvell.isMUMIMOSupported);$.each(l.marvell.advancedRadioSettings,function(){if(this.radioID==="RADIO_2.4GHz"){l.marvell.radio24=this}else{if(this.radioID==="RADIO_5GHz"){l.marvell.radio50=this}}})}})}if(k){w.add({action:"/jnap/wirelessap/qualcomm/GetAdvancedRadioSettings",data:{},cb:function(y){var x=false;l.qualcomm=$.extend(true,{},y.output);console.warn(l.qualcomm);$.each(l.qualcomm.qualcommAdvancedRadioSettings,function(){if(this.radioID==="RADIO_2.4GHz"){l.qualcomm.qca_radio24=this}else{if(this.radioID==="RADIO_5GHz"){l.qualcomm.qca_radio50=this}else{if(this.radioID==="RADIO_5GHz_2"){l.qualcomm.qca_radio50_2=this;x=true}}}});if(!x){$(".hasBandSteering").hide()}}})}if(q&&!t){w.add({action:"/jnap/wirelessap/mediatek/GetAdvancedSettings",data:{},cb:function(x){l.mediatek.advancedsettings=$.extend(true,{},x.output)}})}if(t){w.add({action:"/jnap/wirelessap/mediatek/GetAdvancedSettings2",data:{},cb:function(x){l.mediatek.advancedsettings=$.extend(true,{},x.output);if(!l.mediatek.advancedsettings.isMUMIMOSupported){$("#advancedwireless .AdvancedMediatek2 input").prop("disabled","disabled")}if(l.mediatek.advancedsettings.advancedRadioSettings){$.each(l.mediatek.advancedsettings.advancedRadioSettings,function(){if(this.radioID==="RADIO_2.4GHz"){l.mediatek.mtk_radio24=this}else{if(this.radioID==="RADIO_5GHz"){l.mediatek.mtk_radio50=this}}})}}})}w.send()}$(document).ready(function(){RAINIER.ui.showWaiting();RAINIER.jnap.send("/jnap/core/GetDeviceInfo",{},function(w){if(w.result==="OK"){l.info=w.output||{};m()}else{RAINIER.ui.alert("GetDeviceInfo encountered an error! error:"+w.error+" result: "+w.result);RAINIER.ui.hideWaiting()}})})}());