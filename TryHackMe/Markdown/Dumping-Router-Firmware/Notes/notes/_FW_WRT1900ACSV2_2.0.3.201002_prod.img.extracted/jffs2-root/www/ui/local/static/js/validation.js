if(!RAINIER){RAINIER={}}RAINIER.validation=RAINIER.validation||{};RAINIER.validation=(function(){function j(l,k,m){return(l===k?"":l+"-")+k+" "+(m==="numeric"?RAINIER.ui.validation.strings.digit:RAINIER.ui.validation.strings.characters)}function a(l){var k=$(l).attr("validator"),m=[];switch(k){case"email":m.push({test:RAINIER.ui.validation.tests.isBlank,when:true,message:RAINIER.ui.validation.strings.inputIsRequired});m.push({test:RAINIER.ui.validation.tests.isLengthInRange.curry(7,254),when:false,message:j(7,254)});m.push({test:RAINIER.ui.validation.tests.isEmail,when:false,message:RAINIER.ui.validation.strings.invalidEmailAddress});break;case"password":m.push({test:RAINIER.ui.validation.tests.isBlank,when:true,message:RAINIER.ui.validation.strings.inputIsRequired});m.push({test:RAINIER.ui.validation.tests.isLengthInRange.curry(6,128),when:false,message:j(6,128)});m.push({test:RAINIER.ui.validation.tests.alpha,when:false,message:RAINIER.ui.validation.strings.invalidCharacters});m.push({test:RAINIER.ui.validation.tests.numeric,when:false,message:RAINIER.ui.validation.strings.invalidCharacters});break;case"ipv4Address":m.push({test:RAINIER.ui.validation.tests.isIPAddress.curry($(l),false),when:false,message:RAINIER.ui.validation.strings.invalidIPAddress});break;case"ipv4AddressAllowZeroes":m.push({test:RAINIER.ui.validation.tests.isIPAddress.curry($(l),true),when:false,message:RAINIER.ui.validation.strings.invalidIPAddress});break;default:break}return m}function g(q,m){var l=m.value,p=true,n="";for(var o=0;o<q.length&&p;o++){var k;if(typeof q[o].test==="function"){k=q[o].test(l)}else{if(typeof q[o].test==="object"){k=q[o].test.test(l)}}if(k===q[o].when){p=false;n=q[o].message}}return{isValid:p,errorMessage:n}}function b(k,l){RAINIER.ui.inputBalloon.setBalloonError(l);RAINIER.ui.inputBalloon.show({elContainer:$(k)},true)}var d=null;function f(){if($(this).hasClass("invalid")){$(this).removeClass("invalid");RAINIER.ui.inputBalloon.hide(0)}}function h(){if($(this).hasClass("invalid")){b(this,this.errorMessage)}}function e(k,l){$(k).addClass("invalid");k.errorMessage=l;if(!d){d=k}$(k).blur(f);$(k).keypress(f);$(k).focus(h)}function i(k){var l=c();d=null;for(var m=0;m<l.length;m++){var o=a(l[m]);var n=g(o,l[m]);if(!n.isValid){e(l[m],n.errorMessage)}}if(k){k()}if(d){$(d).focus()}return(!d)}function c(){return $('[validator]:[validator!=""]:visible:not(disabled)')}return{getValidatorElements:c,validate:i,setInvalid:e}}());