$(document).ready(function(){var b=RAINIER.ui.buildInputValidBalloon,d=RAINIER.createAccount.strings;var a={firstName:b($.extend(true,{},{els:$("#firstName"),minLen:1,maxLen:128,whiteSpace:false,isRequired:true})),lastName:b($.extend(true,{},{els:$("#lastName"),minLen:1,maxLen:128,whiteSpace:false,isRequired:true})),username:b($.extend(true,{},{els:$("#username"),minLen:7,maxLen:254,whiteSpace:false,isRequired:true,validationType:"email"})),usernameConfirm:b($.extend(true,{},{els:$("#usernameConfirm"),minLen:7,maxLen:254,whiteSpace:false,isRequired:true,validationType:"confirmEmail",elCompareTo:$("#username")})),password:b($.extend(true,{},{els:$("#password"),minLen:8,maxLen:128,whiteSpace:false,isRequired:true,validCharSet:"ascii",validationType:"password"})),passwordConfirm:b($.extend(true,{},{els:$("#passwordConfirm"),minLen:8,maxLen:128,whiteSpace:false,isRequired:true,validCharSet:"ascii",validationType:"confirmPassword",elCompareTo:$("#password")})),acceptTerms:b($.extend(true,{},{els:$("#accept-terms"),validationType:"checked",message:d.mustAcceptTerms}))};RAINIER.ui.associateButtons("input[type=text], input[type=password]","#submit-create-account");var c=$("#submit-create-account");$.cookie("rp",RAINIER.util.fixNoE(RAINIER.util.getUrlVars()["rp"],""),{path:"/"});RAINIER.ui.language.handleRefresh(["#accept-terms","#accept-promotions","#firstName","#lastName","#password","#password","#passwordConfirm","#username","#username","#usernameConfirm"]);c.click(function(){var h=RAINIER.ui.language.fromStringLocaleToLanguageObject($("#language-select").val()),f=a.firstName.isValid(true);if(f){f=a.lastName.isValid(true)}if(f){f=a.username.isValid(true)}if(f){f=a.usernameConfirm.isValid(true)}if(f){f=a.password.isValid();if(!f){a.password.isValid(true);$("#password").blur();$("#password").focus()}}if(f){f=a.passwordConfirm.isValid(true);if(!f){$("passwordConfirm").blur();$("passwordConfirm").focus()}}if(f){f=a.acceptTerms.isValid(true)}if(!f){return false}RAINIER.ui.wait();var g={account:{username:$.trim($("#username").val()),firstName:$.trim($("#firstName").val()),lastName:$.trim($("#lastName").val()),password:$.trim($("#password").val()),gender:$.trim($("#gender").val()),preferences:{locale:h,newsletterOptIn:$("#accept-promotions").is(":checked")}}};Account.create(g,function(){$("#account-fields-container").hide();$("#account-create-success").show();RAINIER.ui.wait(false)},function(i){RAINIER.ui.wait(false);switch(i.code){case"ACCOUNT_ALREADY_EXISTS":RAINIER.ui.alert(d.accountExistsMessage.replace("{username}",g.account.username),d.accountExistsHeading,function(){window.location.reload()});return true}return false})});function e(){RAINIER.ui.hideMasterWaiting();RAINIER.ui.showAppletContainer();RAINIER.ui.placeholders.init();RAINIER.ui.showSlides(RAINIER.ui.slideResources.captionCreateAccount);RAINIER.ui.showLinksysAppContent(RAINIER.ui.linksysAppResources.captionCreateAccount)}RAINIER.network.getDeviceInfo(function(){RAINIER.ui.init(e)})});