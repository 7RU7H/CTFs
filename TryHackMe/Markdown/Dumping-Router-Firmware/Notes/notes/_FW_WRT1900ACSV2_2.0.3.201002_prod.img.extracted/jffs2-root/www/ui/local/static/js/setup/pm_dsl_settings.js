function goToNextPage(){clearAllInputErrors();RAINIER.shared.util.setCookie("pppSettings",true,null,"/");checkInternetStatus()}function validateInput(a,b){clearAllInputErrors();if(a.length>255){showInputValidationError("accountNameInputValidation",false)}else{if(!RAINIER.shared.util.isAscii(a)){showInputValidationError("accountNameInputValidation",true,RAINIER.setup.ui.inputInvalid)}else{if(b.length>255){showInputValidationError("passwordInputValidation",false)}else{if(!RAINIER.shared.util.isAscii(b)){showInputValidationError("passwordInputValidation",true,RAINIER.setup.ui.inputInvalid)}else{return true}}}}return false}function init(){getDSLSettings(function(a){if(a.result==="OK"){RAINIER.PMSettings.dslSettings=RAINIER.PMSettings.dslSettings||{};if(RAINIER.shared.util.getCookie("dslSettings")){RAINIER.PMSettings.dslSettings=JSON.parse(RAINIER.shared.util.getCookie("dslSettings"))}if(RAINIER.PMSettings.dslSettings.pppSettings){setCredentialsValues()}else{showView("landing")}checkFailedConnection();changeBtnState(document.getElementById("nextButton"),true)}})}function setCredentialsValues(){if(RAINIER.PMSettings.dslSettings.pppSettings.username){document.getElementById("accountNameInput").value=RAINIER.PMSettings.dslSettings.pppSettings.username}showView("landing")}window.onload=function(){showView("loading");init()};function invalidCredentials(){document.hideElementById("connectionErrorDiv");document.showElementById("validationErrorDiv")}function checkFailedConnection(){if(RAINIER.manualSettingsRetries>1&&RAINIER.shared.util.getCookie("pppSettings")){document.showElementById("connectionErrorDiv")}}function setDslSettings(){var a=document.getElementById("accountNameInput").value,b=document.getElementById("passwordInput").value;showView("working");if(!validateInput(a,b)){showView("landing");return}else{var c={};RAINIER.PMSettings.dslSettings=RAINIER.PMSettings.dslSettings||{};if(RAINIER.PMSettings.dslSettings.pppSettings){RAINIER.PMSettings.dslSettings.pppSettings.username=a;RAINIER.PMSettings.dslSettings.pppSettings.password=b}else{RAINIER.PMSettings.dslSettings.pppSettings={username:a,password:b}}if(RAINIER.shared.util.getCookie("manualSetup")){setDSLSettings(function(d){if(d.result==="OK"){goToNextPage()}else{checkFailedConnection();if(d.result==="ErrorInvalidUsername"||d.result==="ErrorInvalidPassword"){invalidCredentials()}else{RAINIER.executeDefaultJnapErrorHandler(d)}showView("landing")}})}else{setPPPSettings(function(d){if(d.result==="OK"){goToNextPage()}else{if(d.result==="ErrorInvalidUsername"||d.result==="ErrorInvalidPassword"){invalidCredentials()}else{RAINIER.executeDefaultJnapErrorHandler(d)}showView("landing")}})}}}function checkInputs(){}window.onbeforeunload=function(){return RAINIER.shared.util.decodeHtml(RAINIER.setup.ui.confirmExit)};