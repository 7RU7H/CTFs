(function(){var c=$("#device-map-widget"),e="EEBEB3F4-5482-4DAE-8D77-1BA5AC7D19BE";function d(h){var l=0,g=0,j=0,k;h.forEach(function(i){if(i.isOnline()&&!i.isGuest()){l++;for(k=0;k<i.data.connections.length;k++){if(i.data.connections[k].wireless){if(i.data.connections[k].wireless.band==="5GHz"){j++}else{g++}}}}});c.find("#lnkCurrent").text(l);c.find("#band24").text(g);c.find("#band5").text(j)}function a(g,i){var h=RAINIER.connect.AppletManager.getAppletById(e);if(h){if(g){RAINIER.ui.MainMenu.launchApplet(h,"","add-device")}else{RAINIER.ui.MainMenu.launchApplet(h,i)}}else{console.warn("Widget: cannot locate Device List applet")}}function b(){RAINIER.deviceManager.getDevices({cb:d,exclusions:{excludeAuthority:true}})}function f(){var g=c.find("#btnAddDevice");g.attr("tooltip",g.text());RAINIER.ui.tooltip.add(g,"top");g.click(function(){a(true)});c.find(".app-link").click(function(){a(false,"")});b();RAINIER.event.connect(["devices.revisionUpdated","devices.guestNetworkUpdated"],function(){b()});RAINIER.jnap.send({action:RAINIER.jnapActions.getRadioInfo(),data:{},cb:function(j){var i=false,h=false;if(j.result==="OK"){$.each(j.output.radios,function(l,k){if(k.band==="2.4GHz"){i=true}else{if(k.band==="5GHz"){h=true}}});if(!i){c.find(".wirelessTwoRadio").hide()}if(!h){c.find(".wirelessFiveRadio").hide()}}else{}}})}f()}());