$(document).ready(function(){var b=RAINIER.ui.buildInputValidBalloon,a;function c(){if(!e()){return}var g={resetCode:RAINIER.shared.util.getCookie("reset-code"),adminPassword:$("#admin-password").val(),passwordHint:$("#password-hint").val()};if(!g.resetCode){window.location.replace("/ui/dynamic/index.html")}RAINIER.ui.wait();RAINIER.jnap.send({action:"/jnap/nodes/setup/SetAdminPassword",data:g,cb:function(i,h){if(i&&i.result==="OK"){RAINIER.shared.util.setCookie("admin-auth","Basic "+window.btoa("admin:"+g.adminPassword),null,"/");RAINIER.shared.util.setCookie("admin-password-reset",true,null,"/");RAINIER.shared.util.deleteCookie("user-auth-token");RAINIER.shared.util.deleteCookie("current-network-id");RAINIER.shared.util.deleteCookie("reset-code");RAINIER.network.setRemoteSetting(false,function(){window.location.replace("/")})}},useAdminAuth:true,forceLocal:true})}function f(){a={adminPassword:b($.extend(true,{},validation.ruleSet.adminPassword,{els:$("#admin-password")})),passwordHint:b($.extend(true,{},{validationType:"utf8LengthTooLong",maxLen:512,els:$("#password-hint")}))}}function e(){return a.adminPassword.isValid(true)&&a.passwordHint.isValid(true)}function d(){$("#applet-container").css("visibility","visible");RAINIER.ui.textAreaPlaceholder.init();RAINIER.ui.placeholders.init();window.onbeforeunload=function(){RAINIER.shared.util.deleteCookie("reset-code")};RAINIER.network.getDeviceInfo(function(){$("#submit").click(c);$("textarea").val("");RAINIER.ui.init();RAINIER.ui.associateButtons("#admin-password, #password-hint","#submit");f()})}d()});