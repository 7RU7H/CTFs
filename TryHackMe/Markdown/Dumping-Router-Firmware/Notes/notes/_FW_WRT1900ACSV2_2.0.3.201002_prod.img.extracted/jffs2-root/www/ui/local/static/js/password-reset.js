$(document).ready(function(){function a(){var g=RAINIER.shared.util.getURLParameter("verificationToken");if(!g){var c=RAINIER.ui.buildInputValidBalloon({els:$("#username"),minLen:7,maxLen:254,whiteSpace:false,isRequired:true,validationType:"email"});$(".reset-step1").show();$("#submit-password-reset").click(function(){var i=c.isValid(true);if(!i){return}RAINIER.ui.wait();var j=$.trim($("#username").val());RAINIER.cloud.send({url:"/cloud/user-service/rest/accounts/"+j+"/passwordresets",type:"POST",request:{},cb:function(){$("#password-reset-sent").show();$("#account-fields-container").hide();RAINIER.ui.wait(false)},cbError:Account.loginErrorHandler})})}else{$(".reset-step2").show();var e=RAINIER.ui.buildInputValidBalloon,h="my-account-password",f=$("#password-reset-container");var d={password:e({els:f.find("#password"),minLen:8,maxLen:128,whiteSpace:false,isRequired:true,validCharSet:"ascii",validationType:"password",group:h}),passwordConfirm:e({els:f.find("#confirm-password"),validationType:"confirmPassword",elCompareTo:f.find("#password"),group:h})};RAINIER.ui.associateButtons("input[type=password]","#submit-new-password");$("#submit-new-password").click(function(){var i=d.password.isValid();if(!i){d.password.isValid(true);f.find("#password").blur();f.find("#password").focus()}else{i=d.passwordConfirm.isValid(true)}if(!i){return}var j={parameter:{name:"password",value:f.find("#password").val()}};Account.validate(g,function(){RAINIER.ui.dialog("#success-dialog",{onSubmit:function(){window.location.replace("/")}}).show()},j)})}}function b(){var c=RAINIER.shared.util.getURLParameter("lang");if(c){RAINIER.ui.language.compareLangParameter(c,a)}else{a()}RAINIER.ui.placeholders.init();RAINIER.ui.showAppletContainer();RAINIER.ui.showSlides();RAINIER.ui.showLinksysAppContent(RAINIER.ui.linksysAppResources.captionPasswordReset)}RAINIER.network.getDeviceInfo(function(){RAINIER.ui.init(b)})});