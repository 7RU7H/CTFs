RAINIER=RAINIER||{};var OOKLA=(function(){var b;var a;return{check_bandwidth_calibration:function(c){a=c;RAINIER.deviceManager.getAuthorityDevice(function(d){b=d;if(!d.getCustomProperty("lastBandwidthCalibrationDate")||d.getCustomProperty("lastBandwidthCalibrationDate").length===0){OOKLA.start_speed_test()}})},start_speed_test:function(){$.getScript("http://linksys.ookla.com/swfobject.js?2012-06-12",function(){swfobject.embedSWF("http://linksys.ookla.com/speedtest.swf?2012-06-15","bandwidth-calibration","0","0","7.0.0",null,{},{allowScriptAccess:"always"},{})})},speed_test_started:function(){},speed_test_completed:function(){RAINIER.jnap.send({action:"/jnap/qos/GetQoSSettings",data:{},cb:function(d){if(d&&d.result==="OK"&&(d.output.downstreamBandwidthbps!==0)){a(d);var c=new Date();b.setCustomProperty("lastBandwidthCalibrationDate",c.getTime().toString())}},disableDefaultAjaxErrHandler:true,disableDefaultJnapErrHandler:true,disableDefaultRebootErrHandler:true})},speed_test_download_start:function(){RAINIER.jnap.send({action:"/jnap/qos/calibration/BeginDownloadCalibration",data:{},disableDefaultAjaxErrHandler:true,disableDefaultJnapErrHandler:true,disableDefaultRebootErrHandler:true})},speed_test_download_stop:function(){RAINIER.jnap.send({action:"/jnap/qos/calibration/EndDownloadCalibration",data:{},disableDefaultAjaxErrHandler:true,disableDefaultJnapErrHandler:true,disableDefaultRebootErrHandler:true})},speed_test_upload_start:function(){RAINIER.jnap.send({action:"/jnap/qos/calibration/BeginUploadCalibration",data:{},disableDefaultAjaxErrHandler:true,disableDefaultJnapErrHandler:true,disableDefaultRebootErrHandler:true})},speed_test_upload_stop:function(){RAINIER.jnap.send({action:"/jnap/qos/calibration/EndUploadCalibration",data:{},disableDefaultAjaxErrHandler:true,disableDefaultJnapErrHandler:true,disableDefaultRebootErrHandler:true})},speed_test_error:function(){b.setCustomProperty("lastBandwidthCalibrationDate","")}}}());RAINIER.ookla=OOKLA;