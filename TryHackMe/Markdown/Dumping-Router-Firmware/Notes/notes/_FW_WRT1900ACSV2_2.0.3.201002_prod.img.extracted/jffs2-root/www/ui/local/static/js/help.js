RAINIER.ui.helpMenu=(function(){var m=null,h=[],f="help.html",d=null,j=RAINIER.browser.mobileSafariVersion>-1,o=450;function b(p){if($(p).find("#div502Message").length>0){window.location.replace("/ui/local/dynamic/502.html")}}function e(){var p=d.find("nav");p.find("#LinksysSmartWiFi").click();p.scrollTop(0);if(j){$(document.body).scrollTop(0)}else{d.find("div").scrollTop(0)}}function c(){setTimeout(g,o)}function g(){var s=$.cookie("current-applet"),p=d.find("nav");if(s&&h.length!==0&&p.find("#"+s).length){p.find("#"+s).click();if(!j){var r=p.find("#"+s).offset().top-p.offset().top,q=p.scrollTop();if(r>q+p.outerHeight()-10){p.scrollTop(r)}}}else{d.find("#help-nav-list #LinksysSmartWiFi").click()}}function i(){m=RAINIER.ui.dialogHelp("#help-menu-dialog");if(d.length===0){l()}if($("#help-menu-dialog div.dialog-content div.help-content").children().length===0){n()}m.show();e();c()}function k(s,r){var p,q;for(q=0;q<s.length;q++){if(d.find("#help-nav-list #"+$(s[q]).attr("id")).length===0){d.find("#help-nav-list").append(s[q])}}for(q=0;q<r.length;q++){p=_.template(r[q]);if(d.find('#help-menu-dialog div.dialog-content div[id="'+$(p).attr("id")+'"]').length===0){d.find("#help-menu-dialog div.dialog-content div.help-content").append(p)}}$("#help-menu-dialog > nav > ul > li").click(function(){$.each($("#help-nav-list").children(),function(){$(this).removeClass("selected")});$(this).addClass("selected");if(d.find("#help-"+$(this).attr("id")).offset()){var t=d.find("#help-"+$(this).attr("id")).offset().top;if(j){$(document.body).scrollTop(t)}else{d.find("#help-menu-dialog div.dialog-content div.pad-horz-lrg").scrollTop(d.find("#help-menu-dialog div.dialog-content div.pad-horz-lrg").scrollTop()+t-d.find("#help-menu-dialog div.dialog-content div.pad-horz-lrg").offset().top)}}});d.find("a.help-top").click(e);c();RAINIER.ui.textOrphan();$("#help-menu-dialog *[data-serviceneeded]").each(function(){if(!RAINIER.shared.util.areServicesSupported([$(this).data("serviceneeded")])&&(!$(this).data("serviceneededalt")||!RAINIER.shared.util.areServicesSupported([$(this).data("serviceneededalt")]))){$(this).hide()}})}function n(){function q(x,y,z){p++;if(!z){h.splice(jQuery.inArray(y,h),1)}if(p===x){$.each(h,function(B){var C=this;if(B>0){v[B-1]=t.formatObj(C)}var A=r.formatObj(C);$.get(this.helpPath,function(E){b(E);var D=A+E+"</div>";u[B]=D;w++;if(w===h.length){k(v,u)}})})}}function s(x,y){$.ajax({url:y.helpPath,type:"HEAD",error:function(){q(x,y,false)},success:function(){q(x,y,true)}})}var u=[],v=[],t='<li id="{appletId}">{name}</li>',r='<div id="help-{appletId}">',p=0,w=0;if(typeof RAINIER.connect==="object"&&RAINIER.connect.AppletManager){h=$.extend([],RAINIER.connect.AppletManager.getAppletList());$.each(h,function(){this.helpPath=this.root+"/help/"+f});h.splice(0,0,{appletId:"LinksysSmartWiFi",root:"/ui/dynamic/",name:RAINIER.ui.common.strings.brand,helpPath:"/ui/dynamic/"+f});$.each(h,function(x){s(h.length,h[x])})}else{$.get("/ui/dynamic/"+f,function(y){b(y);var x='<div id="help-LinksysSmartWiFi">'+y+"</div>";u[0]=x;k(v,u)})}}function l(){d=$("#help-dialog-wrapper");$("#help-menu").click(i);$("#help-menu-dialog .close-button").click(function(){m.close()})}function a(){return(m!==null&&m.isShowing())}return{initialize:l,show:i,isShowing:a}}());