RAINIER.blockScheduler=(function(){var G="0",S=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],U=RAINIER.util.getDaysOfWeek(),C=RAINIER.util.getLocaleHoursInDay(),j,k,I,z,D,A,L=false,r=false,J=false,y=-1000,x=-1000,i=-1000,f=-1000,v=0,u=0,W=0,F=0,o=0,n=0,N=0,M=0,K={sunday:"000000000000001111111111111111111111111111000000",monday:"000000000000001111111111111111111111111111000000",tuesday:"000000000000001111111111111111111111111111000000",wednesday:"000000000000001111111111111111111111111111000000",thursday:"000000000000001111111111111111111111111111000000",friday:"000000000000001111111111111111111111111111111111",saturday:"000000000000001111111111111111111111111111111111"};function Q(){I=$("#blockInternetAccessNet");j=I.find("#tableBlockAccess");k=I.find("#divSelection");A=I[0];z=j[0];D=k[0];J=RAINIER.ui.getDirection()==="rtl";E();w();$(A).bind("mousedown",R);$(A).bind("mousemove",b);$(A).bind("mouseup",V)}function p(X){var Y=RAINIER.ui.build,ab=Y.TD({"class":"unchecked",click:"ToggleBlockCellClass"});for(var aa=0;aa<U.length;aa++){var ac="#row"+U[aa];for(var Z=0;Z<24;Z++){$(ac).append(ab.cloneNode(true))}$(ac).append(Y.TD())}if(typeof X==="function"){X()}}function E(){var Y,X="<td></td>";for(Y=0;Y<C.length;Y++){X+="<td><div>"+C[Y]+"</div></td>"}if(C[13]==="13"||C[13]==="١٣"){j.find(".moon-icon, .sun-icon").css("display","none")}j.find(".header").html(X)}function w(){var Y=j.find("#rowSunday")[0],X=j.find("#rowSaturday")[0];if(J){o=Y.cells[Y.cells.length-2].offsetLeft+1;n=Y.cells[Y.cells.length-2].offsetTop+1;N=X.cells[0].offsetLeft-1;M=X.cells[0].offsetTop+X.offsetHeight}else{o=Y.cells[1].offsetLeft+1;n=Y.cells[1].offsetTop+1;N=X.cells[X.cells.length-1].offsetLeft-1;M=X.cells[X.cells.length-1].offsetTop+X.offsetHeight-1}}function P(X){return X.pageX-j.offset().left}function O(X){return X.pageY-j.offset().top}function R(X){y=P(X);x=O(X);v=y;u=x;W=0;F=0;if(y>=o-1&&y<=N+1&&x>=n-1&&x<=M+1){r=true;q(v,u,W,F,"hidden");$.cancelEvents(X)}return false}function q(ab,aa,Z,X,Y){ab+=z.offsetLeft;aa+=z.offsetTop;D.style.left=ab+"px";D.style.top=aa+"px";D.style.width=Z+"px";D.style.height=X+"px";D.style.visibility=Y}function b(X){if(r){L=true;i=P(X);f=O(X);if(i<=o){i=o}if(i>=N){i=N}if(f<=n){f=n}if(f>=M){f=M}if(y<=i){v=y;W=i-y}else{v=i-1;W=y-i}if(x<=f){u=x;F=f-x}else{u=f-1;F=x-f}q(v,u,W,F,"visible")}return false}function V(){if(r){r=false;L=false;l();D.style.visibility="hidden"}}function h(X){for(var Y=2;Y<z.rows.length-1;Y++){if(X>=z.rows[Y].offsetTop&&X<=z.rows[Y].offsetTop+z.rows[Y].offsetHeight){return Y}}}function c(Y){for(var X=1;X<z.rows[2].cells.length-1;X++){if(Y>=z.rows[2].cells[X].offsetLeft&&Y<=z.rows[2].cells[X].offsetLeft+z.rows[2].cells[X].offsetWidth-1){return X}}}function m(Y,ac,aa,X){for(var ab=Y;ab<=ac;ab++){for(var Z=aa;Z<=X;Z++){if(z.rows[ab].cells[Z].className!==z.rows[Y].cells[aa].className){return"checked"}}}return z.rows[Y].cells[aa].className}function l(){var Y=h(u),ae=h(u+F),ab,X;if(J){ab=c(v+W);X=c(v)}else{ab=c(v);X=c(v+W)}var aa=m(Y,ae,ab,X),ac=(aa==="checked")?"unchecked":"checked";for(var ad=Y;ad<=ae;ad++){for(var Z=ab;Z<=X;Z++){z.rows[ad].cells[Z].className=ac}}}function H(Z,Y){var ab=0;for(var aa=1;aa<Z.cells.length-1;aa++){var X=Z.cells[aa];if(Y[ab]===G){X.className="checked"}else{X.className="unchecked"}ab+=2}}function T(Z){var ab=0,Y=jQuery.extend(true,[],S);for(var aa=1;aa<Z.cells.length-1;aa++){var X=Z.cells[aa];if(X.className==="checked"){Y[ab]=G;Y[ab+1]=G}ab+=2}return Y.join("")}function a(X){var Z=2,Y=z.rows[Z];H(Y,X.sunday);Y=z.rows[++Z];H(Y,X.monday);Y=z.rows[++Z];H(Y,X.tuesday);Y=z.rows[++Z];H(Y,X.wednesday);Y=z.rows[++Z];H(Y,X.thursday);Y=z.rows[++Z];H(Y,X.friday);Y=z.rows[++Z];H(Y,X.saturday)}function t(){var X={},Z=2,Y=z.rows[Z];X.sunday=T(Y);Y=z.rows[++Z];X.monday=T(Y);Y=z.rows[++Z];X.tuesday=T(Y);Y=z.rows[++Z];X.wednesday=T(Y);Y=z.rows[++Z];X.thursday=T(Y);Y=z.rows[++Z];X.friday=T(Y);Y=z.rows[++Z];X.saturday=T(Y);return X}function e(X){var Y=new Date(),aa=new Date(Y.getTime()+(Y.getTimezoneOffset()*-60000));if(X!==undefined){aa=RAINIER.util.routerTimeToDate(X)}var Z=z.rows[aa.getUTCDay()+2].cells[aa.getUTCHours()+1];return Z}function d(){var X=[];for(var Y=0;Y<7;Y++){var Z=z.rows[Y+2];X[Y]=T(Z).split("")}return X}function B(ab,Z){var aa=Math.abs(Z.getTime()-ab.getTime()),X=Math.floor(aa/(60*60*1000)),Y=Math.floor((aa/(60*1000))%60);return X+":"+Y}function s(){function ae(al,aj){for(var ak=al;ak<=aj;ak++){ag=$.inArray(af,ac[ak]);if(ag>-1){var ai=new Date(X),ah=(ak>Z)?ak-Z:7-Z+ak;ai.setDate(X.getDate()+ah);ai.setHours(ag/2,0,0);return B(ai,X)}}return false}var X=new Date(),aa=new Date(X.getTime()+(X.getTimezoneOffset()*-60000)),Z=aa.getUTCDay(),ab=aa.getUTCHours()*2,ac=d(),af=e().className==="checked"?"1":"0",Y=false;X.setSeconds(0);var ag=$.inArray(af,ac[Z],ab);if(ag>-1&&ag>ab){var ad=new Date(X);ad.setHours(ag/2,0,0);return B(ad,X)}if(Z<6){Y=ae(Z+1,ac.length)}if(Y===false&&Z>0){Y=ae(0,Z-1)}return Y||ae(Z,ab-1)}function g(){for(var X=0;X<7;X++){var Y=z.rows[X+2];if(T(Y).indexOf("0")!==-1){return true}}return false}return{init:Q,populateBlockAccessTable:p,populateCellsOffsets:w,setCheckedCellsPol:a,getAccessSchedule:t,getCurrentTimeCell:e,getNextCellSchedule:s,hasSelectedCells:g,defaultRule:function(){return K}}})();