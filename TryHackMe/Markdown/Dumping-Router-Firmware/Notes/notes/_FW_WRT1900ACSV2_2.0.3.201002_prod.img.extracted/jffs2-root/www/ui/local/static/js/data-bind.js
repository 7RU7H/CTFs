RAINIER=RAINIER||{};String.prototype.format=function(){var a=this;$.each(arguments,function(c,b){var d;if(typeof b==="object"){$.each(b,function(e,f){d=new RegExp("{"+e+"\\}","g");a=a.replace(d,RAINIER.util.htmlEncode(f))})}else{d=new RegExp("{"+c+"\\}","g");a=a.replace(d,RAINIER.util.htmlEncode(b))}});return a};String.prototype.formatObj=function(){if(!arguments[0]||typeof arguments[0]!=="object"){return this}var d=this.replace(/{{/g,"");d=d.replace(/}}/g,"");var h=/\{[^\}]*\}/g,e=$.unique(d.match(h)),g=arguments[0],c,f;for(var b=0,a=e.length;b<a;b++){c=e[b].replace(/^\{/g,"\\{").replace(/\}$/g,"\\}");f=e[b].replace(/^\{/g,"").replace(/\}$/g,"");h=new RegExp(c,"g");d=d.replace(h,RAINIER.util.htmlEncode(RAINIER.util.getObjVal(g,f))||"")}return d};Array.prototype.format=function(b){if(!arguments[0]||typeof arguments[0]!=="string"){return this}var d=[];for(var c=0,a=this.length;c<a;c++){d.push(b.formatObj(this[c]))}return d.join("")};RAINIER.binder=(function(){function g(k){var j=k.attr("type"),i;if(j==="text"||j==="password"||k.is("textarea")){k.attr("value","")}else{if(j==="checkbox"||j==="radio"){k.removeAttr("checked");k.change()}else{if(k.is("select")){k.get(0).selectedIndex=-1;k.change()}else{if(k.is("div,span")&&k.hasClass("ip-input")){i=k.children(":not(span)");if(i.length===4){i.each(function(l,m){$(m).html("")})}}else{if(k.is("div")&&k.hasClass("mac-input")){i=k.children(":not(span)");if(i.length===6){i.each(function(l,m){$(m).html("")})}}else{if(k.is("label")||k.is("td")||k.is("span")){k.text("")}}}}}}}function h(n,p,l){var m=n.attr("type"),k,j;if(typeof p!=="undefined"){if(m==="text"||m==="password"||n.is("textarea")){n.attr("value",p);n.keyup()}else{if(m==="checkbox"){if(p){n.attr("checked","checked");n.change()}else{n.removeAttr("checked");n.change()}}else{if(m==="radio"){j=f(n.attr("value"),typeof p);if(p===j&&n.attr("checked")!=="checked"){n.attr("checked","checked");n.change()}}else{if(n.is("select")){j=f(n.val(),typeof p);if(p!==j){n.val(p.toString());n.change()}}else{if(n.is("div,span")&&n.hasClass("ip-input")){var i=p.split(".");k=n.children(":not(span)");if(k.length===i.length&&i.length===4){k.each(function(q,s){var r=$(s);if(r.attr("value")!==undefined){r.val(i[q])}else{r.text(i[q])}})}else{}}else{if(n.is("div")&&n.hasClass("mac-input")){var o=p.split(":");k=n.children(":not(span)");if(k.length===o.length&&o.length===6){k.each(function(q,s){var r=$(s);if(r.attr("value")!==undefined){r.val(o[q])}else{r.text(o[q])}})}else{}}else{if(n.is("a")||n.is("label")||n.is("td")||n.is("th")||n.is("span")||n.is("h2")||n.is("h3")||n.is("button")){if(l==="display-only"){n.html(p)}else{n.text(p)}}else{}}}}}}}}}function c(k,m,p,l){var o;for(var n=0,j=k.length;n<j;n++){o=m.cloneNode(true);e(k[n],$(o),p);if(l instanceof $&&l[0]&&l[0].appendChild){l[0].appendChild(o)}}}function e(m,p,j,n,o){var q,l,k,i,r;if(!m){}q=p?$(p).find:$;l=q.call(p,"[name]");if(typeof j!=="object"){j=j||{}}l.each(function(s,t){k=$(t);if(k.attr("name").length>0){r=k.attr("name");if(r.substr(0,5)==="each:"){i=r.substr(5);c(m[i],t,j,n)}else{var u=RAINIER.util.getObjVal(m,r);if(typeof u!=="undefined"){h(k,u,j[r])}else{if(o){g(k)}}}}})}function f(k,i){var j;if(k===""){k=""}switch(i){case"string":j=""+k;break;case"boolean":if(typeof k==="string"){j=k==="true"}else{j=!!k}break;case"number":j=parseInt(k,10);break;default:j=k;break}return j}function b(l,o,m,n,k){k=k||o;this.level=this.level||0;if(this.level>50){this.level=0;return}if(typeof o==="string"){if(o.indexOf(".")){o=o.split(".")}else{l[o]=f(m,n[k]);return true}}if(typeof o==="object"&&o.constructor===Array){var i=o.shift();if(o.length===0){l[i]=f(m,n[k])}else{if(!l.hasOwnProperty(i)||typeof l[i]!=="object"){l[i]={}}this.level++;b(l[i],o,m,n,k)}}try{this.level=0}catch(j){}}function a(k,m,l,o){var j;if(k.attr("type")==="text"||k.attr("type")==="password"||k.is("textarea")){b(m,l,k.attr("value"),o)}else{if(k.attr("type")==="checkbox"){b(m,l,k.is(":checked")?true:false,o)}else{if(k.attr("type")==="radio"){if(k.is(":checked")){b(m,l,k.attr("value"),o)}}else{if(k.is("select")){b(m,l,k.attr("value"),o)}else{if(k.is("label")){b(m,l,k.html(),o)}else{if(k.hasClass("ip-input")){var i=[];j=k.children(":not(span)");if(j.length===4){j.each(function(p,q){if($(this).is("label")){i.push($(this).html()||"0")}else{i.push($(q).attr("value")||"0")}});b(m,l,i.join("."),o)}else{}}else{if(k.is("div")&&k.hasClass("mac-input")){var n=[];j=k.find("input[type=text]");if(j.length===6){j.each(function(p,q){n.push($(q).attr("value")||"0")});b(m,l,n.join(":"),o)}else{}}else{}}}}}}}}function d(l,o){var j,k,m,n={};if(typeof o!=="object"){o=o||{}}if(l&&l.find&&typeof l.find==="function"){j=l.find("[name]")}else{j=$("[name]")}var i=false;j.each(function(r,s){k=$(s);if(k.attr("name").length){m=k.attr("name");if(o[m]!=="display-only"){if(m.substr(0,5)==="each:"){var q=m.substr(5);n[q]=n[q]||[];var p=n[q];p.push(d(k));i=true}else{if(!i){a(k,n,m,o)}}}}});return n}return{toDom:e,fromDom:d}}());