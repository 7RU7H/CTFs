function simpleInputValidation(){var d=document.getElementById("firstName").value,b=document.getElementById("lastName").value,f=document.getElementById("username").value,e=document.getElementById("usernameConfirm").value,a=document.getElementById("password").value,c=document.getElementById("passwordConfirm").value;clearAllInputErrors();if(d.length<1||d.length>128){showInputValidationError("firstNameInputValidation",false)}else{if(RAINIER.shared.util.beginsOrEndsWithSpace(d)){showInputValidationError("firstNameInputValidation",true,RAINIER.setup.ui.inputCannotBeginOrEndWithSpace)}else{if(b.length<1||b.length>128){showInputValidationError("lastNameInputValidation",false)}else{if(RAINIER.shared.util.beginsOrEndsWithSpace(b)){showInputValidationError("lastNameInputValidation",true,RAINIER.setup.ui.inputCannotBeginOrEndWithSpace)}else{if(f.length<7||f.length>254){showInputValidationError("usernameInputValidation",false)}else{if(RAINIER.shared.util.beginsOrEndsWithSpace(f)){showInputValidationError("usernameInputValidation",true,RAINIER.setup.ui.inputCannotBeginOrEndWithSpace)}else{if(f!==e){showInputValidationError("usernameConfirmInputValidation",true)}else{if(a.length<8||a.length>128||!RAINIER.shared.util.isAscii(a)){showInputValidationError("passwordInputValidation",false)}else{if(a!==c){showInputValidationError("passwordConfirmInputValidation",true)}else{if(!document.getElementById("acceptTerms").checked){showInputValidationError("acceptTermsInputValidation",true)}else{return true}}}}}}}}}}return false}function getCreateAccountCb(b,a){showView("landing");document.getElementById("firstName").focus();if(b){switch(b){case RAINIER.simple.account.errorCode.INVALID_USERNAME:showInputValidationError("usernameInputValidation",true,RAINIER.setup.ui.invalidEmail);break;case RAINIER.simple.account.errorCode.ACCOUNT_ALREADY_EXISTS:showGeneralError(RAINIER.createAccount.strings.accountExistsMessage.replace("{username}",a));break;default:showGeneralError(RAINIER.login.strings.unexpectedCloudError);break}}}function createAccountFailed(b,a){getCreateAccountCb(b,a)}function createAccount(){if(!simpleInputValidation()){return}showView("working");var b=RAINIER.shared.ui.getHtmlLang();var a={account:{username:document.getElementById("username").value,firstName:document.getElementById("firstName").value,lastName:document.getElementById("lastName").value,password:document.getElementById("password").value,gender:document.getElementById("gender").value,preferences:{locale:b,newsletterOptIn:document.getElementById("acceptPromotions").checked}}};RAINIER.cloud.send({url:"/cloud/user-service/rest/accounts/u",type:"POST",data:a,cb:function(){showView("success")},cbError:function(c){RAINIER.simple.account.getErrorCode(c,function(d){createAccountFailed(d,a.account.username)})}})}function init(){RAINIER.jnap.send({action:"/jnap/core/GetDeviceInfo",data:{},cb:function(a){if(a.result==="OK"){RAINIER.setup.setRouterInfo(a.output)}else{if(a.result!=="_ErrorUnauthorized"){RAINIER.executeDefaultJnapErrorHandler(a)}}showView("landing")},disableDefaultJnapErrHandler:true,disableDefaultAjaxErrHandler:true})}window.onload=function(){showView("loading");init()};RAINIER.page=RAINIER.page||{};RAINIER.page.createAccountSimple=RAINIER.page.createAccountSimple||{};RAINIER.page.createAccountSimple.init=init;RAINIER.page.createAccountSimple.createAccount=createAccount;