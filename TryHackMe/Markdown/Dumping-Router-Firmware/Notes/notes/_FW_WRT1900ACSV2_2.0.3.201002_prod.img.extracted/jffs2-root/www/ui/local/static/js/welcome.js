$(document).ready(function(){var a=$("#adminPass");function d(){var g=$.trim(a.val());if(!RAINIER.shared.util.isAdminPasswordValid(g)){RAINIER.ui.inputBalloon.message({els:$("#adminPass"),message:RAINIER.login.strings.invalidRouterPassword,autoHide:true});return}RAINIER.ui.wait();function f(h){RAINIER.jnap.send({action:"/jnap/ownednetwork/SetNetworkOwner",data:{ownerSessionToken:$.cookie("user-auth-token"),friendlyName:h.friendlyName},cb:function(l,k){if(l&&l.result==="OK"){RAINIER.network.discoverAuthority(function(){if(RAINIER.network.isBehindAuthority()&&!RAINIER.network.getAuthorityNetworkID()){window.location.replace("/ui/dynamic/welcome.html")}else{RAINIER.network.setRemoteSetting(true,function(){window.location.replace("/")})}})}else{RAINIER.ui.wait(false);var m=RAINIER.login.strings.unexpectedError,j=RAINIER.util.parseJSON(k.responseText);if(j&&j.result){switch(j.result){case"ErrorCloudUnavailable":m=RAINIER.login.strings.cloudUnavailable;break;case"_ErrorUnauthorized":m=RAINIER.login.strings.invalidRouterPassword;break}}else{}var i=RAINIER.ui.build;RAINIER.ui.inputBalloon.add({els:a,balloonContent:i.DIV({"class":"flow"},[i.SPAN({"class":"icon warning"}),i.SPAN({"class":"msg"},m)])},true);RAINIER.ui.inputBalloon.hide(7000)}},disableDefaultJnapErrHandler:true,disableDefaultAjaxErrHandler:true,disableDefaultRebootErrHandler:true,useAdminAuth:true,adminPasswordOverride:"Basic "+window.btoa("admin:"+g)})}RAINIER.shared.util.getCurrentAuthorityDevice(function(h){f(h)},g)}function b(){function f(h){var g=h.passwordHint;if(g.length>0){$(".showPasswordHint").show();$("#passwordHint").text(g)}}RAINIER.network.getPasswordHint(f)}function c(f){if(f){$(".showPasswordHint").hide();$(".hidePasswordHint").show()}else{$(".showPasswordHint").show();$(".hidePasswordHint").hide()}}function e(){$("#applet-container").css("visibility","visible");$("#submit-login").click(d);a.keydown(function(g){var f=g.keyCode||g.which;if(f===13){$.cancelEvents(g);d()}});RAINIER.ui.placeholders.init();if(!RAINIER.util.isNoE($.cookie("rp"))){d()}a.focus();RAINIER.network.getDeviceInfo(function(){if(RAINIER.shared.util.areServicesSupported(["/jnap/core/Core3"])){$(".showPasswordHint a").click(function(){c(true)});$(".hidePasswordHint a").click(function(){c(false)});b()}RAINIER.ui.init()})}e()});