(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","./jnap"],b)}else{if(typeof module==="object"&&module.exports){module.exports=b(require("jquery"),require("./jnap"))}else{a.CLOUD_REST=b(a.$,a.JNAP)}}}(this,function(d,g){var a,f,l,h,e,m=false;function i(o,n){if(!m||n){o()}else{setTimeout(function(){i(o)},50)}}function k(s,o,n,r,p,q){s.headers["X-Linksys-Client-Type-Id"]=o;if(n){s.headers.Authorization='LinksysUserAuth session_token="'+n+'"'}if(r){s.headers["X-Linksys-Network-Id"]=r}if(p){s.headers["X-Linksys-Router-Model-Number"]=p}if(q){s.headers["X-Linksys-Router-FW-Version"]=q}s.timeout=35000}function j(q,p,o,n,r){a=q;f=p;l=o;h=n;e=r;return b(q,p,o,n,r)}function b(q,p,o,n,r){if(!q){q=a;p=f;o=l;n=h;r=e}return function(s){if(!s){return{clientId:q,sessionToken:p,networkId:o,routerModel:n,routerFWVersion:r}}else{if(p&&!o){s.headers["X-JNAP-Session"]=p}if(p&&o){k(s,q,p,o,n,r);s.url="/cloud/JNAP/"}}}}function c(t,o,q,w){var u=g.Deferred(),p={headers:{Expires:"Fri, 10 Oct 2015 14:19:41 GMT","Cache-Control":"no-cache"},dataType:"json",contentType:"application/json; charset=UTF-8",type:o,url:"/cloud"+t},s=Date.now();w=w||{};if(w&&w.contentType){p.contentType=w.contentType}if(p.contentType.indexOf("application/json")!==-1){p.data=JSON.stringify(q)}else{p.data=q}if(w.auth){var v=w.auth();v.networkId=w.omitNetworkId?"":v.networkId;k(p,v.clientId,v.sessionToken,v.networkId,v.routerModel,v.routerFWVersion)}else{l=w.omitNetworkId?"":l;k(p,a,f,l,h,e)}if(w.headers){p.headers=d.extend(true,p.headers,w.headers)}var r=function(C,x,B,y){var A=(y||"")+t,z=Date.now()-s;u.resolve(C,x,B)};var n=function(C,x,B,y){var A=(y||"")+t,z=Date.now()-s;u.reject(C,x,B)};i(function(){g.sendHttpRequest(r,n,p,w)},w.disablePause);return u}return{setAuth:j,getAuth:b,send:c,pause:function(){m=true},resume:function(){m=false}}}));